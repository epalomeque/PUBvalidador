{% extends 'base.html' %}

{#% block head_printstuff %#}
{#% endblock %#}

{% block sidebar %}
{% endblock %}

{% block breadcrumb_zone %}
{% endblock %}

{% block settingsbox %}
{% endblock %}

{% block content %}

<div class="col-xs-12 col-lg-6 middle">

  <div class="well well-lg">

      {% if nuevoTrabajo.errors %}
        <p>{{ nuevoTrabajo.errors }}</p>
      {% endif %}

     <h2 class="center"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Registrar un padrón</h2>

      <form enctype="multipart/form-data" method="post" action="{% url 'home' %}">
          {% csrf_token %}
          <label for="id_AnioEjercicio">Año: </label>
          {{   nuevoTrabajo.AnioEjercicio }}
          <div class="space-6"></div>
          <label for="id_Trimestre">Trimestre: </label>
          {{  nuevoTrabajo.Trimestre }}
          <div class="space-6"></div>
          <label for="id_TipoPadron">Tipo de Padrón: </label>
          {{  nuevoTrabajo.TipoPadron }}
          <div class="space-6"></div>
          <label for="id_archivoRelacionado">Cargar archivo de datos: </label>
          {{ nuevoTrabajo.archivoRelacionado }}
          <div class="space-18"></div>

          {{ nuevoTrabajo.Usuario }}
          {{ nuevoTrabajo.Estatus }}

          <div class="clearfix center">
          <button type="submit" class="width-45 pull-center btn btn-app btn-primary">
              <i class="ace-icon fa fa-pencil-square-o fa-2x"></i>
              <span class="bigger-110">Iniciar trabajo</span>
          </button>
          </div>

     </form>
  </div>

</div>

{% if error_estructura == False %}
    <div class="col-xs-12 col-lg-6 middle alert alert-danger">
        <button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>
        <strong> <i class="ace-icon fa fa-times"></i>¡Error! </strong>
        La estructura del archivo que intentas usar no corresponde con lo reportado para el inicio del trabajo, por favor, verificalo e intentalo nuevamente
        <br>
    </div>
{% endif %}

{% if error_trimestre == False %}
    <div class="col-xs-12 col-lg-6 middle alert alert-danger">
        <button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>
        <strong><i class="ace-icon fa fa-times"></i>¡Error!</strong>
        El trimestre señalado al iniciar tu trabajo no corresponde con los cargados en el archivo, verificalo por favor e intentalo nuevamente
        <br>
    </div>
{% endif %}

{% if error_anio == False %}
    <div class="col-xs-12 col-lg-6 middle alert alert-danger">
        <button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>
        <strong><i class="ace-icon fa fa-times"></i>¡Error!</strong>
        El año señalado al iniciar tu trabajo no corresponde con los cargados en el archivo, verificalo por favor e intentalo nuevamente
        <br>
    </div>
{% endif %}

{% if total_pendientes > 0  %}
<div class="col-xs-12 col-lg-6 middle">
  <div class="well well-lg">
  <h2 class="center"><span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> Tareas en proceso</h2>
    {% for record in pendientes %}
        <div class="renglon">
            <div class="datos">
            <a href="validar/{{ record.pk }}">{{ record.archivoRelacionado.name }}</a>
            <br />
            <strong>Ejercicio: </strong> {{ record.AnioEjercicio }} | <strong>Trimestre: </strong>{{ record.Trimestre.identPeriodo }} | <strong>Última actualización: </strong>{{ record.UltimaActualizacion|date:"SHORT_DATE_FORMAT" }}

            </div>
            <!-- div class="botones hidden-sm hidden-xs btn-group" -->
            <div class="botones">
            {% if record.Estatus_id == 1 %}
                <span class="label label-warning">
			        <strong>Estatus: </strong>{{ record.Estatus }}
			    </span>
                <br />
                <a href="validar/{{ record.pk }}" class="btn btn-xs btn-info" >
                    <i class="ace-icon fa fa-pencil bigger-120"></i>
                </a>
                <a  href="borrar/{{ record.pk }}" class="btn btn-xs btn-danger">
                        <i class="ace-icon fa fa-trash-o bigger-120"></i>
                    </a>
            {% elif record.Estatus_id == 2 %}
                <span class="label label-success">
			        <strong>Estatus: </strong>{{ record.Estatus }}
			    </span>
                <br />
                <button class="btn btn-xs btn-success">
                    <i class="ace-icon fa fa-check bigger-120"></i>
                </button>
                <a href="validar/{{ record.pk }}" class="btn btn-xs btn-info">
                        <i class="ace-icon fa fa-pencil bigger-120"></i>
                </a>
            {% elif record.Estatus_id == 3 %}
                <span class="label label-inverse">
			        <strong>Estatus: </strong>{{ record.Estatus }}
			    </span>
                <br />
                <button class="btn btn-xs btn-inverse">
                    Generar Reporte
                </button>
            {% elif record.Estatus_id == 4 %}
                <span class="label">
			        <strong>Estatus: </strong>{{ record.Estatus }}
			    </span>
                <br />
                <a href="validar/{{ record.pk }}" class="btn btn-xs btn-info" >
                    <i class="ace-icon fa fa-pencil bigger-120"></i>
                </a>
                <a  href="borrar/{{ record.pk }}" class="btn btn-xs btn-danger">
                        <i class="ace-icon fa fa-trash-o bigger-120"></i>
                    </a>
            {% else %}
                <p>Error en la carga, intente nuevamente</p>
            {% endif %}
            </div>
        </div>
    {% endfor %}
  </div>
</div>
{% endif %}

{% endblock %}